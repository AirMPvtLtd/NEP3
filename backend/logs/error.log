{"error":"jobScheduler.start is not a function","level":"error","message":"Failed to start server:","service":"nep-workbench","timestamp":"2026-01-06 01:26:59"}
{"level":"error","message":"Get current user error: Cannot read properties of undefined (reading 'role')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'role')\n    at role (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:614:22)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:328:13)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express-rate-limit/dist/index.cjs:807:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express-rate-limit/dist/index.cjs:691:5","timestamp":"2026-01-08 16:20:48"}
{"level":"error","message":"Update profile error: Cannot read properties of undefined (reading 'role')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'role')\n    at role (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:639:22)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at next (/home/popeye/Downloads/NEP3/backend/middleware/validation.middleware.js:323:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:328:13)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express-rate-limit/dist/index.cjs:807:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express-rate-limit/dist/index.cjs:691:5","timestamp":"2026-01-08 16:20:49"}
{"level":"error","message":"Logout error: Cannot read properties of undefined (reading 'userId')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'userId')\n    at userId (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:279:24)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:328:13)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express-rate-limit/dist/index.cjs:807:7\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express-rate-limit/dist/index.cjs:691:5","timestamp":"2026-01-08 16:20:49"}
{"level":"error","message":"Logout error: Cannot read properties of undefined (reading 'userId')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'userId')\n    at exports.logout (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:279:24)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-09 02:12:12"}
{"level":"error","message":"AppError is not a constructor","method":"GET","name":"TypeError","path":"/login.html","service":"nep-workbench","stack":"TypeError: AppError is not a constructor\n    at /home/popeye/Downloads/NEP3/backend/app.js:631:8\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)","statusCode":500,"timestamp":"2026-01-09 19:03:39"}
{"level":"error","message":"AppError is not a constructor","method":"GET","name":"TypeError","path":"/favicon.ico","service":"nep-workbench","stack":"TypeError: AppError is not a constructor\n    at /home/popeye/Downloads/NEP3/backend/app.js:631:8\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)","statusCode":500,"timestamp":"2026-01-09 19:03:39"}
{"level":"error","message":"AppError is not a constructor","method":"GET","name":"TypeError","path":"/login.html","service":"nep-workbench","stack":"TypeError: AppError is not a constructor\n    at /home/popeye/Downloads/NEP3/backend/app.js:631:8\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)","statusCode":500,"timestamp":"2026-01-09 19:03:42"}
{"level":"error","message":"AppError is not a constructor","method":"GET","name":"TypeError","path":"/favicon.ico","service":"nep-workbench","stack":"TypeError: AppError is not a constructor\n    at /home/popeye/Downloads/NEP3/backend/app.js:631:8\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:145:7)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)","statusCode":500,"timestamp":"2026-01-09 19:03:42"}
{"level":"error","message":"Get current user error: Cannot read properties of undefined (reading 'role')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'role')\n    at exports.getCurrentUser (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:614:22)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 13:29:28"}
{"level":"error","message":"Get current user error: Cannot read properties of undefined (reading 'role')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'role')\n    at exports.getCurrentUser (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:614:22)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 13:29:28"}
{"level":"error","message":"Logout error: Cannot read properties of undefined (reading 'userId')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'userId')\n    at exports.logout (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:279:24)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 13:29:28"}
{"level":"error","message":"Get current user error: Cannot read properties of undefined (reading 'role')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'role')\n    at exports.getCurrentUser (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:614:22)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 13:29:52"}
{"level":"error","message":"Get current user error: Cannot read properties of undefined (reading 'role')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'role')\n    at exports.getCurrentUser (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:614:22)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 13:29:52"}
{"level":"error","message":"Logout error: Cannot read properties of undefined (reading 'userId')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'userId')\n    at exports.logout (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:279:24)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 13:29:52"}
{"level":"error","message":"Get current user error: Cannot read properties of undefined (reading 'role')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'role')\n    at exports.getCurrentUser (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:614:22)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 13:34:07"}
{"level":"error","message":"Get current user error: Cannot read properties of undefined (reading 'role')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'role')\n    at exports.getCurrentUser (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:614:22)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 13:34:07"}
{"level":"error","message":"Logout error: Cannot read properties of undefined (reading 'userId')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'userId')\n    at exports.logout (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:279:24)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 13:34:07"}
{"level":"error","message":"Get current user error: Cannot read properties of undefined (reading 'role')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'role')\n    at exports.getCurrentUser (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:614:22)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 13:46:05"}
{"level":"error","message":"Get current user error: Cannot read properties of undefined (reading 'role')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'role')\n    at exports.getCurrentUser (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:614:22)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 13:46:05"}
{"level":"error","message":"Get current user error: Cannot read properties of undefined (reading 'role')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'role')\n    at exports.getCurrentUser (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:614:22)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 13:46:05"}
{"level":"error","message":"Get current user error: Cannot read properties of undefined (reading 'role')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'role')\n    at exports.getCurrentUser (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:614:22)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 13:46:05"}
{"level":"error","message":"Refresh token error: Invalid refresh token","service":"nep-workbench","stack":"Error: Invalid refresh token\n    at verifyRefreshToken (/home/popeye/Downloads/NEP3/backend/config/jwt.js:227:13)\n    at exports.refreshToken (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:306:21)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)","timestamp":"2026-01-10 13:46:05"}
{"level":"error","message":"Update profile error: Cannot read properties of undefined (reading 'role')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'role')\n    at exports.updateProfile (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:639:22)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at validateStudentUpdate (/home/popeye/Downloads/NEP3/backend/middleware/validation.middleware.js:323:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)","timestamp":"2026-01-10 13:46:05"}
{"level":"error","message":"Get current user error: Cannot read properties of undefined (reading 'role')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'role')\n    at exports.getCurrentUser (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:614:22)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 13:46:05"}
{"level":"error","message":"Update profile error: Cannot read properties of undefined (reading 'role')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'role')\n    at exports.updateProfile (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:639:22)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at validateStudentUpdate (/home/popeye/Downloads/NEP3/backend/middleware/validation.middleware.js:323:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)","timestamp":"2026-01-10 13:46:05"}
{"level":"error","message":"Logout error: Cannot read properties of undefined (reading 'userId')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'userId')\n    at exports.logout (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:279:24)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 13:46:05"}
{"level":"error","message":"Logout error: Cannot read properties of undefined (reading 'userId')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'userId')\n    at exports.logout (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:279:24)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 13:46:05"}
{"level":"error","message":"Resend verification error: Cannot read properties of undefined (reading 'toLowerCase')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'toLowerCase')\n    at exports.resendVerification (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:474:60)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 14:01:17"}
{"level":"error","message":"Forgot password error: Cannot read properties of undefined (reading 'toLowerCase')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'toLowerCase')\n    at exports.forgotPassword (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:548:60)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 14:01:17"}
{"level":"error","message":"Resend verification error: Cannot read properties of undefined (reading 'toLowerCase')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'toLowerCase')\n    at exports.resendVerification (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:474:60)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 14:08:23"}
{"level":"error","message":"Forgot password error: Cannot read properties of undefined (reading 'toLowerCase')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'toLowerCase')\n    at exports.forgotPassword (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:548:60)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 14:08:23"}
{"0":"U","1":"n","10":"e","11":"d","2":"a","3":"u","4":"t","5":"h","6":"o","7":"r","8":"i","9":"z","level":"error","message":"❌ Error sending email:","service":"nep-workbench","timestamp":"2026-01-10 14:09:58"}
{"errors":[{"field":null,"help":null,"message":"The provided authorization grant is invalid, expired, or revoked"}],"level":"error","message":"SendGrid Error:","service":"nep-workbench","timestamp":"2026-01-10 14:09:58"}
{"0":"U","1":"n","10":"e","11":"d","2":"a","3":"u","4":"t","5":"h","6":"o","7":"r","8":"i","9":"z","level":"error","message":"❌ Error sending email:","service":"nep-workbench","timestamp":"2026-01-10 14:09:59"}
{"errors":[{"field":null,"help":null,"message":"The provided authorization grant is invalid, expired, or revoked"}],"level":"error","message":"SendGrid Error:","service":"nep-workbench","timestamp":"2026-01-10 14:09:59"}
{"kind":"ObjectId","level":"error","message":"Signup error: Cast to ObjectId failed for value \"TCH-EWBI1\" (type string) at path \"_id\" for model \"Teacher\"","path":"_id","reason":{},"service":"nep-workbench","stack":"CastError: Cast to ObjectId failed for value \"TCH-EWBI1\" (type string) at path \"_id\" for model \"Teacher\"\n    at SchemaObjectId.cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schema/objectId.js:253:11)\n    at SchemaType.applySetters (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1288:12)\n    at SchemaType.castForQuery (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1724:17)\n    at cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/cast.js:390:32)\n    at cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/cast.js:76:20)\n    at Query.cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/query.js:5060:12)\n    at Query._castConditions (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/query.js:2374:10)\n    at model.Query._findOne (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/query.js:2697:8)\n    at model.Query.exec (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/query.js:4627:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","stringValue":"\"TCH-EWBI1\"","timestamp":"2026-01-10 14:09:59","value":"TCH-EWBI1","valueType":"string"}
{"level":"error","message":"Resend verification error: Cannot read properties of undefined (reading 'toLowerCase')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'toLowerCase')\n    at exports.resendVerification (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:474:60)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 14:10:00"}
{"level":"error","message":"Forgot password error: Cannot read properties of undefined (reading 'toLowerCase')","service":"nep-workbench","stack":"TypeError: Cannot read properties of undefined (reading 'toLowerCase')\n    at exports.forgotPassword (/home/popeye/Downloads/NEP3/backend/controllers/auth.controller.js:548:60)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/popeye/Downloads/NEP3/backend/node_modules/express/lib/router/index.js:47:12)","timestamp":"2026-01-10 14:10:00"}
{"0":"U","1":"n","10":"e","11":"d","2":"a","3":"u","4":"t","5":"h","6":"o","7":"r","8":"i","9":"z","level":"error","message":"❌ Error sending email:","service":"nep-workbench","timestamp":"2026-01-10 14:12:33"}
{"errors":[{"field":null,"help":null,"message":"The provided authorization grant is invalid, expired, or revoked"}],"level":"error","message":"SendGrid Error:","service":"nep-workbench","timestamp":"2026-01-10 14:12:33"}
{"0":"U","1":"n","10":"e","11":"d","2":"a","3":"u","4":"t","5":"h","6":"o","7":"r","8":"i","9":"z","level":"error","message":"❌ Error sending email:","service":"nep-workbench","timestamp":"2026-01-10 14:12:34"}
{"errors":[{"field":null,"help":null,"message":"The provided authorization grant is invalid, expired, or revoked"}],"level":"error","message":"SendGrid Error:","service":"nep-workbench","timestamp":"2026-01-10 14:12:34"}
{"kind":"ObjectId","level":"error","message":"Signup error: Cast to ObjectId failed for value \"TCH-DULNI\" (type string) at path \"_id\" for model \"Teacher\"","path":"_id","reason":{},"service":"nep-workbench","stack":"CastError: Cast to ObjectId failed for value \"TCH-DULNI\" (type string) at path \"_id\" for model \"Teacher\"\n    at SchemaObjectId.cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schema/objectId.js:253:11)\n    at SchemaType.applySetters (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1288:12)\n    at SchemaType.castForQuery (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1724:17)\n    at cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/cast.js:390:32)\n    at cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/cast.js:76:20)\n    at Query.cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/query.js:5060:12)\n    at Query._castConditions (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/query.js:2374:10)\n    at model.Query._findOne (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/query.js:2697:8)\n    at model.Query.exec (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/query.js:4627:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","stringValue":"\"TCH-DULNI\"","timestamp":"2026-01-10 14:12:34","value":"TCH-DULNI","valueType":"string"}
{"_message":"School validation failed","errors":{"schoolAddress":{"kind":"required","message":"School address is required","name":"ValidatorError","path":"schoolAddress","properties":{"message":"School address is required","path":"schoolAddress","type":"required"}}},"level":"error","message":"Signup error: School validation failed: schoolAddress: School address is required","service":"nep-workbench","stack":"ValidationError: School validation failed: schoolAddress: School address is required\n    at Document.invalidate (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3373:32)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3134:17\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1446:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2026-01-10 14:35:28"}
{"0":"U","1":"n","10":"e","11":"d","2":"a","3":"u","4":"t","5":"h","6":"o","7":"r","8":"i","9":"z","level":"error","message":"❌ Error sending email:","service":"nep-workbench","timestamp":"2026-01-10 14:39:24"}
{"errors":[{"field":null,"help":null,"message":"The provided authorization grant is invalid, expired, or revoked"}],"level":"error","message":"SendGrid Error:","service":"nep-workbench","timestamp":"2026-01-10 14:39:24"}
{"0":"U","1":"n","10":"e","11":"d","2":"a","3":"u","4":"t","5":"h","6":"o","7":"r","8":"i","9":"z","level":"error","message":"❌ Error sending email:","service":"nep-workbench","timestamp":"2026-01-10 14:39:25"}
{"errors":[{"field":null,"help":null,"message":"The provided authorization grant is invalid, expired, or revoked"}],"level":"error","message":"SendGrid Error:","service":"nep-workbench","timestamp":"2026-01-10 14:39:25"}
{"0":"U","1":"n","10":"e","11":"d","2":"a","3":"u","4":"t","5":"h","6":"o","7":"r","8":"i","9":"z","level":"error","message":"❌ Error sending email:","service":"nep-workbench","timestamp":"2026-01-10 14:42:56"}
{"errors":[{"field":null,"help":null,"message":"The provided authorization grant is invalid, expired, or revoked"}],"level":"error","message":"SendGrid Error:","service":"nep-workbench","timestamp":"2026-01-10 14:42:56"}
{"kind":"ObjectId","level":"error","message":"Signup error: Cast to ObjectId failed for value \"SCH-2026-0OUYZ\" (type string) at path \"_id\" for model \"School\"","path":"_id","reason":{},"service":"nep-workbench","stack":"CastError: Cast to ObjectId failed for value \"SCH-2026-0OUYZ\" (type string) at path \"_id\" for model \"School\"\n    at SchemaObjectId.cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schema/objectId.js:253:11)\n    at SchemaType.applySetters (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1288:12)\n    at SchemaType.castForQuery (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1724:17)\n    at cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/cast.js:390:32)\n    at cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/cast.js:76:20)\n    at Query.cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/query.js:5060:12)\n    at Query._castConditions (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/query.js:2374:10)\n    at model.Query._findOne (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/query.js:2697:8)\n    at model.Query.exec (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/query.js:4627:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","stringValue":"\"SCH-2026-0OUYZ\"","timestamp":"2026-01-10 14:42:56","value":"SCH-2026-0OUYZ","valueType":"string"}
{"level":"error","message":"Signup error: Operation `schools.findOne()` buffering timed out after 10000ms","service":"nep-workbench","stack":"MongooseError: Operation `schools.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2026-01-10 16:15:28"}
{"level":"error","message":"Update school error: School.findByIdAndUpdate is not a function","service":"nep-workbench","stack":"TypeError: School.findByIdAndUpdate is not a function\n    at exports.updateSchool (/home/popeye/Downloads/NEP3/backend/controllers/admin.controller.js:102:33)\n    at TestContext.<anonymous> (/home/popeye/Downloads/NEP3/backend/admincontroller.test.js:163:27)\n    at Test.runInAsyncScope (node:async_hooks:206:9)\n    at Test.run (node:internal/test_runner/test:796:25)\n    at Suite.processPendingSubtests (node:internal/test_runner/test:526:18)\n    at Test.postRun (node:internal/test_runner/test:889:19)\n    at Test.run (node:internal/test_runner/test:835:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async Promise.all (index 0)\n    at async Suite.run (node:internal/test_runner/test:1135:7)","timestamp":"2026-01-10 18:27:22"}
{"level":"error","message":"Get all teachers error: Teacher.find(...).sort is not a function","service":"nep-workbench","stack":"TypeError: Teacher.find(...).sort is not a function\n    at exports.getAllTeachers (/home/popeye/Downloads/NEP3/backend/controllers/admin.controller.js:326:8)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TestContext.<anonymous> (/home/popeye/Downloads/NEP3/backend/admincontroller.test.js:173:5)\n    at async Test.run (node:internal/test_runner/test:797:9)\n    at async Suite.processPendingSubtests (node:internal/test_runner/test:526:7)","timestamp":"2026-01-10 18:27:22"}
{"level":"error","message":"Forgot password error: Operation `schools.findOne()` buffering timed out after 10000ms","service":"nep-workbench","stack":"MongooseError: Operation `schools.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2026-01-10 18:59:10"}
{"level":"error","message":"Forgot password error: Operation `schools.findOne()` buffering timed out after 10000ms","service":"nep-workbench","stack":"MongooseError: Operation `schools.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2026-01-10 19:02:40"}
{"level":"error","message":"Signup error: Operation `schools.findOne()` buffering timed out after 10000ms","service":"nep-workbench","stack":"MongooseError: Operation `schools.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2026-01-10 20:04:40"}
{"level":"error","message":"Signup error: Operation `schools.findOne()` buffering timed out after 10000ms","service":"nep-workbench","stack":"MongooseError: Operation `schools.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2026-01-11 01:02:37"}
{"level":"error","message":"Signup error: Operation `schools.findOne()` buffering timed out after 10000ms","service":"nep-workbench","stack":"MongooseError: Operation `schools.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2026-01-11 01:04:43"}
{"level":"error","message":"Signup error: Operation `schools.findOne()` buffering timed out after 10000ms","service":"nep-workbench","stack":"MongooseError: Operation `schools.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2026-01-11 01:19:11"}
{"level":"error","message":"Signup error: Operation `schools.findOne()` buffering timed out after 10000ms","service":"nep-workbench","stack":"MongooseError: Operation `schools.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2026-01-11 01:20:26"}
{"level":"error","message":"Signup error: Operation `schools.findOne()` buffering timed out after 10000ms","service":"nep-workbench","stack":"MongooseError: Operation `schools.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2026-01-11 01:49:46"}
{"level":"error","message":"Signup error: Operation `schools.findOne()` buffering timed out after 10000ms","service":"nep-workbench","stack":"MongooseError: Operation `schools.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2026-01-11 01:52:59"}
{"level":"error","message":"Login error: Operation `teachers.findOne()` buffering timed out after 10000ms","service":"nep-workbench","stack":"MongooseError: Operation `teachers.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2026-01-12 20:55:49"}
{"level":"error","message":"Login error: Operation `teachers.findOne()` buffering timed out after 10000ms","service":"nep-workbench","stack":"MongooseError: Operation `teachers.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2026-01-12 20:57:22"}
{"level":"error","message":"Login error: Operation `students.findOne()` buffering timed out after 10000ms","service":"nep-workbench","stack":"MongooseError: Operation `students.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2026-01-13 19:38:38"}
{"level":"error","message":"Signup error: Operation `schools.findOne()` buffering timed out after 10000ms","service":"nep-workbench","stack":"MongooseError: Operation `schools.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2026-01-13 19:39:34"}
{"level":"error","message":"Login error: Operation `schools.findOne()` buffering timed out after 10000ms","service":"nep-workbench","stack":"MongooseError: Operation `schools.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2026-01-13 19:43:15"}
{"level":"error","message":"Login error: Operation `schools.findOne()` buffering timed out after 10000ms","service":"nep-workbench","stack":"MongooseError: Operation `schools.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2026-01-13 19:43:42"}
{"level":"error","message":"Login error: Operation `students.findOne()` buffering timed out after 10000ms","service":"nep-workbench","stack":"MongooseError: Operation `students.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2026-01-13 19:45:30"}
{"level":"error","message":"Login error: Operation `schools.findOne()` buffering timed out after 10000ms","service":"nep-workbench","stack":"MongooseError: Operation `schools.findOne()` buffering timed out after 10000ms\n    at Timeout.<anonymous> (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js:187:23)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2026-01-14 11:35:45"}
{"0":"U","1":"n","10":"e","11":"d","2":"a","3":"u","4":"t","5":"h","6":"o","7":"r","8":"i","9":"z","level":"error","message":"❌ Error sending email:","service":"nep-workbench","timestamp":"2026-01-14 13:18:26"}
{"errors":[{"field":null,"help":null,"message":"The provided authorization grant is invalid, expired, or revoked"}],"level":"error","message":"SendGrid Error:","service":"nep-workbench","timestamp":"2026-01-14 13:18:26"}
{"_message":"InstitutionalReport validation failed","errors":{"reportType":{"kind":"enum","message":"`institutional` is not a valid enum value for path `reportType`.","name":"ValidatorError","path":"reportType","properties":{"enumValues":["weekly","monthly","quarterly","annual"],"length":13,"message":"`institutional` is not a valid enum value for path `reportType`.","path":"reportType","type":"enum","value":"institutional"},"value":"institutional"}},"level":"error","message":"Generate report error: InstitutionalReport validation failed: reportType: `institutional` is not a valid enum value for path `reportType`.","service":"nep-workbench","stack":"ValidationError: InstitutionalReport validation failed: reportType: `institutional` is not a valid enum value for path `reportType`.\n    at Document.invalidate (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3373:32)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3134:17\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1446:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2026-01-14 13:43:01"}
{"_message":"Teacher validation failed","errors":{"status":{"kind":"enum","message":"`APPROVED` is not a valid enum value for path `status`.","name":"ValidatorError","path":"status","properties":{"enumValues":["pending","approved","rejected","suspended","active","inactive"],"length":8,"message":"`APPROVED` is not a valid enum value for path `status`.","path":"status","type":"enum","value":"APPROVED"},"value":"APPROVED"},"subjects.0":{"kind":"enum","message":"`physics` is not a valid enum value for path `subjects.0`.","name":"ValidatorError","path":"subjects.0","properties":{"enumValues":["Physics","Chemistry","Mathematics","Biology","Computer Science","English","Hindi","Social Science"],"length":7,"message":"`physics` is not a valid enum value for path `subjects.0`.","path":"subjects.0","type":"enum","value":"physics"},"value":"physics"}},"level":"error","message":"Add teacher error: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`., subjects.0: `physics` is not a valid enum value for path `subjects.0`.","service":"nep-workbench","stack":"ValidationError: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`., subjects.0: `physics` is not a valid enum value for path `subjects.0`.\n    at Document.invalidate (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3373:32)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3134:17\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1446:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2026-01-14 13:56:01"}
{"_message":"Teacher validation failed","errors":{"status":{"kind":"enum","message":"`APPROVED` is not a valid enum value for path `status`.","name":"ValidatorError","path":"status","properties":{"enumValues":["pending","approved","rejected","suspended","active","inactive"],"length":8,"message":"`APPROVED` is not a valid enum value for path `status`.","path":"status","type":"enum","value":"APPROVED"},"value":"APPROVED"},"subjects.0":{"kind":"enum","message":"`physics` is not a valid enum value for path `subjects.0`.","name":"ValidatorError","path":"subjects.0","properties":{"enumValues":["Physics","Chemistry","Mathematics","Biology","Computer Science","English","Hindi","Social Science"],"length":7,"message":"`physics` is not a valid enum value for path `subjects.0`.","path":"subjects.0","type":"enum","value":"physics"},"value":"physics"}},"level":"error","message":"Add teacher error: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`., subjects.0: `physics` is not a valid enum value for path `subjects.0`.","service":"nep-workbench","stack":"ValidationError: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`., subjects.0: `physics` is not a valid enum value for path `subjects.0`.\n    at Document.invalidate (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3373:32)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3134:17\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1446:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2026-01-14 22:32:00"}
{"_message":"Teacher validation failed","errors":{"status":{"kind":"enum","message":"`APPROVED` is not a valid enum value for path `status`.","name":"ValidatorError","path":"status","properties":{"enumValues":["pending","approved","rejected","suspended","active","inactive"],"length":8,"message":"`APPROVED` is not a valid enum value for path `status`.","path":"status","type":"enum","value":"APPROVED"},"value":"APPROVED"}},"level":"error","message":"Add teacher error: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`.","service":"nep-workbench","stack":"ValidationError: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`.\n    at Document.invalidate (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3373:32)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3134:17\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1446:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2026-01-14 23:08:52"}
{"_message":"Teacher validation failed","errors":{"status":{"kind":"enum","message":"`APPROVED` is not a valid enum value for path `status`.","name":"ValidatorError","path":"status","properties":{"enumValues":["pending","approved","rejected","suspended","active","inactive"],"length":8,"message":"`APPROVED` is not a valid enum value for path `status`.","path":"status","type":"enum","value":"APPROVED"},"value":"APPROVED"}},"level":"error","message":"Add teacher error: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`.","service":"nep-workbench","stack":"ValidationError: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`.\n    at Document.invalidate (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3373:32)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3134:17\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1446:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2026-01-14 23:09:33"}
{"_message":"Teacher validation failed","errors":{"status":{"kind":"enum","message":"`APPROVED` is not a valid enum value for path `status`.","name":"ValidatorError","path":"status","properties":{"enumValues":["pending","approved","rejected","suspended","active","inactive"],"length":8,"message":"`APPROVED` is not a valid enum value for path `status`.","path":"status","type":"enum","value":"APPROVED"},"value":"APPROVED"}},"level":"error","message":"Add teacher error: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`.","service":"nep-workbench","stack":"ValidationError: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`.\n    at Document.invalidate (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3373:32)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3134:17\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1446:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2026-01-14 23:22:38"}
{"_message":"Teacher validation failed","errors":{"status":{"kind":"enum","message":"`APPROVED` is not a valid enum value for path `status`.","name":"ValidatorError","path":"status","properties":{"enumValues":["pending","approved","rejected","suspended","active","inactive"],"length":8,"message":"`APPROVED` is not a valid enum value for path `status`.","path":"status","type":"enum","value":"APPROVED"},"value":"APPROVED"}},"level":"error","message":"Add teacher error: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`.","service":"nep-workbench","stack":"ValidationError: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`.\n    at Document.invalidate (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3373:32)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3134:17\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1446:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2026-01-14 23:22:55"}
{"_message":"Teacher validation failed","errors":{"status":{"kind":"enum","message":"`APPROVED` is not a valid enum value for path `status`.","name":"ValidatorError","path":"status","properties":{"enumValues":["pending","approved","rejected","suspended","active","inactive"],"length":8,"message":"`APPROVED` is not a valid enum value for path `status`.","path":"status","type":"enum","value":"APPROVED"},"value":"APPROVED"}},"level":"error","message":"Add teacher error: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`.","service":"nep-workbench","stack":"ValidationError: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`.\n    at Document.invalidate (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3373:32)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3134:17\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1446:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2026-01-14 23:23:23"}
{"_message":"Teacher validation failed","errors":{"status":{"kind":"enum","message":"`APPROVED` is not a valid enum value for path `status`.","name":"ValidatorError","path":"status","properties":{"enumValues":["pending","approved","rejected","suspended","active","inactive"],"length":8,"message":"`APPROVED` is not a valid enum value for path `status`.","path":"status","type":"enum","value":"APPROVED"},"value":"APPROVED"}},"level":"error","message":"Add teacher error: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`.","service":"nep-workbench","stack":"ValidationError: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`.\n    at Document.invalidate (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3373:32)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3134:17\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1446:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2026-01-14 23:30:24"}
{"_message":"Teacher validation failed","errors":{"status":{"kind":"enum","message":"`APPROVED` is not a valid enum value for path `status`.","name":"ValidatorError","path":"status","properties":{"enumValues":["pending","approved","rejected","suspended","active","inactive"],"length":8,"message":"`APPROVED` is not a valid enum value for path `status`.","path":"status","type":"enum","value":"APPROVED"},"value":"APPROVED"}},"level":"error","message":"Add teacher error: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`.","service":"nep-workbench","stack":"ValidationError: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`.\n    at Document.invalidate (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3373:32)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3134:17\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1446:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2026-01-14 23:36:17"}
{"_message":"Teacher validation failed","errors":{"status":{"kind":"enum","message":"`APPROVED` is not a valid enum value for path `status`.","name":"ValidatorError","path":"status","properties":{"enumValues":["pending","approved","rejected","suspended","active","inactive"],"length":8,"message":"`APPROVED` is not a valid enum value for path `status`.","path":"status","type":"enum","value":"APPROVED"},"value":"APPROVED"}},"level":"error","message":"Add teacher error: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`.","service":"nep-workbench","stack":"ValidationError: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`.\n    at Document.invalidate (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3373:32)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3134:17\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1446:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2026-01-14 23:41:16"}
{"_message":"Teacher validation failed","errors":{"status":{"kind":"enum","message":"`APPROVED` is not a valid enum value for path `status`.","name":"ValidatorError","path":"status","properties":{"enumValues":["pending","approved","rejected","suspended","active","inactive"],"length":8,"message":"`APPROVED` is not a valid enum value for path `status`.","path":"status","type":"enum","value":"APPROVED"},"value":"APPROVED"}},"level":"error","message":"Add teacher error: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`.","service":"nep-workbench","stack":"ValidationError: Teacher validation failed: status: `APPROVED` is not a valid enum value for path `status`.\n    at Document.invalidate (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3373:32)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/document.js:3134:17\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1446:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2026-01-14 23:48:08"}
{"code":11000,"errorLabelSet":{},"errorResponse":{"code":11000,"errmsg":"E11000 duplicate key error collection: nep-workbench.teachers index: teacherId_1 dup key: { teacherId: \"TCH-8H1ZR\" }","index":0,"keyPattern":{"teacherId":1},"keyValue":{"teacherId":"TCH-8H1ZR"}},"index":0,"keyPattern":{"teacherId":1},"keyValue":{"teacherId":"TCH-8H1ZR"},"level":"error","message":"Signup error: E11000 duplicate key error collection: nep-workbench.teachers index: teacherId_1 dup key: { teacherId: \"TCH-8H1ZR\" }","service":"nep-workbench","stack":"MongoServerError: E11000 duplicate key error collection: nep-workbench.teachers index: teacherId_1 dup key: { teacherId: \"TCH-8H1ZR\" }\n    at InsertOneOperation.handleOk (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/node_modules/mongodb/lib/operations/insert.js:51:19)\n    at tryOperation (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/node_modules/mongodb/lib/operations/execute_operation.js:214:34)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async executeOperation (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/node_modules/mongodb/lib/operations/execute_operation.js:78:16)\n    at async Collection.insertOne (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/node_modules/mongodb/lib/collection.js:154:16)","timestamp":"2026-01-15 00:09:42"}
{"kind":"ObjectId","level":"error","message":"Get teacher profile error: Cast to ObjectId failed for value \"SCH-2026-M42RM\" (type string) at path \"_id\" for model \"School\"","path":"_id","reason":{},"service":"nep-workbench","stack":"CastError: Cast to ObjectId failed for value \"SCH-2026-M42RM\" (type string) at path \"_id\" for model \"School\"\n    at SchemaObjectId.cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schema/objectId.js:253:11)\n    at SchemaType.applySetters (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1288:12)\n    at SchemaType.castForQuery (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1724:17)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1679:18\n    at Array.map (<anonymous>)\n    at SchemaObjectId.handle$in (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1675:14)\n    at SchemaType.castForQuery (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1720:20)\n    at cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/cast.js:367:39)\n    at Query.cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/query.js:5060:12)\n    at Query._castConditions (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/query.js:2374:10)","stringValue":"\"SCH-2026-M42RM\"","timestamp":"2026-01-15 01:37:35","value":"SCH-2026-M42RM","valueType":"string"}
{"kind":"ObjectId","level":"error","message":"Get teacher profile error: Cast to ObjectId failed for value \"SCH-2026-M42RM\" (type string) at path \"_id\" for model \"School\"","path":"_id","reason":{},"service":"nep-workbench","stack":"CastError: Cast to ObjectId failed for value \"SCH-2026-M42RM\" (type string) at path \"_id\" for model \"School\"\n    at SchemaObjectId.cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schema/objectId.js:253:11)\n    at SchemaType.applySetters (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1288:12)\n    at SchemaType.castForQuery (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1724:17)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1679:18\n    at Array.map (<anonymous>)\n    at SchemaObjectId.handle$in (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1675:14)\n    at SchemaType.castForQuery (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1720:20)\n    at cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/cast.js:367:39)\n    at Query.cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/query.js:5060:12)\n    at Query._castConditions (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/query.js:2374:10)","stringValue":"\"SCH-2026-M42RM\"","timestamp":"2026-01-15 01:47:52","value":"SCH-2026-M42RM","valueType":"string"}
{"kind":"ObjectId","level":"error","message":"Get teacher profile error: Cast to ObjectId failed for value \"SCH-2026-M42RM\" (type string) at path \"_id\" for model \"School\"","path":"_id","reason":{},"service":"nep-workbench","stack":"CastError: Cast to ObjectId failed for value \"SCH-2026-M42RM\" (type string) at path \"_id\" for model \"School\"\n    at SchemaObjectId.cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schema/objectId.js:253:11)\n    at SchemaType.applySetters (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1288:12)\n    at SchemaType.castForQuery (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1724:17)\n    at /home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1679:18\n    at Array.map (<anonymous>)\n    at SchemaObjectId.handle$in (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1675:14)\n    at SchemaType.castForQuery (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/schemaType.js:1720:20)\n    at cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/cast.js:367:39)\n    at Query.cast (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/query.js:5060:12)\n    at Query._castConditions (/home/popeye/Downloads/NEP3/backend/node_modules/mongoose/lib/query.js:2374:10)","stringValue":"\"SCH-2026-M42RM\"","timestamp":"2026-01-15 01:58:55","value":"SCH-2026-M42RM","valueType":"string"}
{"level":"error","message":"Get teacher profile error: School is not defined","service":"nep-workbench","stack":"ReferenceError: School is not defined\n    at exports.getProfile (/home/popeye/Downloads/NEP3/backend/controllers/teacher.controller.js:42:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2026-01-15 02:08:46"}
